!function(n,e){"function"==typeof define&&define.amd?define(["elfinder"],e):"undefined"!=typeof exports?module.exports=e(require("elfinder")):e(n.elFinder)}(this,function(n){"use strict";try{n.prototype.commands.quicklook.plugins||(n.prototype.commands.quicklook.plugins=[]),n.prototype.commands.quicklook.plugins.push(function(n){var e=n.fm,i=n.preview;i.on("update",function(o){var t,a,l=(n.window,o.file);0===l.mime.indexOf("application/vnd.google-apps.")&&("1"==l.url&&(i.hide(),$('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+e.i18n("getLink")+"</button></div>").appendTo(n.info.find(".elfinder-quicklook-info")).on("click",function(){$(this).html('<span class="elfinder-spinner">'),e.request({data:{cmd:"url",target:l.hash},preventDefault:!0}).always(function(){i.show(),$(this).html("")}).done(function(o){var t=e.file(l.hash);n.value.url=t.url=o.url||"",n.value.url&&i.trigger($.Event("update",{file:n.value}))})})),""!==l.url&&"1"!=l.url&&(o.stopImmediatePropagation(),i.one("change",function(){a.remove(),t.off("load").remove()}),a=$('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+e.i18n("nowLoading")+'</span><span class="elfinder-spinner"></div>').appendTo(n.info.find(".elfinder-quicklook-info")),t=$('<iframe class="elfinder-quicklook-preview-iframe"/>').css("background-color","transparent").appendTo(i).on("load",function(){n.hideinfo(),a.remove(),$(this).css("background-color","#fff").show()}).attr("src",e.url(l.hash))))})})}catch(e){}});